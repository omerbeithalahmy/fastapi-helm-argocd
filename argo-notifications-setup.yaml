apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-notifications-cm
  namespace: argocd
data:
  service.slack:  |
    token: $slack.token
  template.app-sync-succeeded:  |
    message:  |
      âœ… Application {{.app.metadata.name}} is now running!
      Sync Status: {{.app.status.sync.status}}
      Health Status: {{.app.status.health.status}}
  trigger.on-sync-succeeded: |
    - description: Application syncing has succeeded
      send: [app-sync-succeeded]  
      when: app.status.operationState.phase in ['Succeeded']